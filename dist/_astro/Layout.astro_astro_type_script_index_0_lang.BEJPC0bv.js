const h="cubic-bezier(0.16, 1, 0.3, 1)",c=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches;function m(){const n=document.querySelectorAll(".reveal, .reveal-fast");if(!n.length)return;if(c()){n.forEach(t=>{t.style.opacity="1",t.style.transform="none",t.classList.add("is-visible")});return}const e=new IntersectionObserver(t=>t.forEach(o=>{o.isIntersecting&&(o.target.classList.add("is-visible"),e.unobserve(o.target))}),{threshold:.06,rootMargin:"0px 0px -32px 0px"});n.forEach(t=>e.observe(t))}function p(){const n=document.querySelectorAll(".stagger-children");if(!n.length)return;if(c()){n.forEach(t=>t.classList.add("is-visible"));return}const e=new IntersectionObserver(t=>t.forEach(o=>{o.isIntersecting&&(o.target.classList.add("is-visible"),e.unobserve(o.target))}),{threshold:.04,rootMargin:"0px 0px -16px 0px"});n.forEach(t=>e.observe(t))}function y(){const n=document.querySelectorAll("[data-counter]");if(!n.length)return;if(c()){n.forEach(t=>{t.textContent=t.dataset.counter??"0"});return}const e=new IntersectionObserver(t=>{t.forEach(o=>{if(!o.isIntersecting)return;const s=o.target,r=parseInt(s.dataset.counter??"0",10),i=1200,a=performance.now(),d=f=>{const l=Math.min((f-a)/i,1),g=l===1?1:1-Math.pow(2,-10*l);s.textContent=Math.round(g*r).toString(),l<1&&requestAnimationFrame(d)};requestAnimationFrame(d),e.unobserve(s)})},{threshold:.5});n.forEach(t=>e.observe(t))}function v(){const n=document.querySelectorAll("section[id]"),e=document.querySelectorAll("[data-toc-link]");if(!n.length||!e.length)return;const t=s=>{e.forEach(r=>{const i=r.getAttribute("href")===`#${s}`;r.classList.toggle("text-ink-1",i),r.classList.toggle("text-accent",i),r.classList.toggle("text-ink-3",!i);const a=r.querySelector("[data-toc-dot]");a&&(a.style.background=i?"var(--color-accent)":"",a.style.opacity=i?"1":"")})},o=new IntersectionObserver(s=>{s.forEach(r=>{r.isIntersecting&&t(r.target.id)})},{threshold:0,rootMargin:"-80px 0px -55% 0px"});n.forEach(s=>o.observe(s))}function E(){const n=document.querySelector("[data-parallax]");if(!n||c())return;let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{const t=window.scrollY,o=Math.min(t*.05,8);n.style.transform=`translateY(${o}px)`,e=!1}),e=!0)},{passive:!0})}function x(){document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",e=>{const t=n.getAttribute("href")?.slice(1);if(!t)return;const o=document.getElementById(t);o&&(e.preventDefault(),o.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",`#${t}`))})})}function b(){const n=document.querySelectorAll("[data-filter]"),e=document.querySelectorAll("[data-device-type]");n.length&&n.forEach(t=>{t.addEventListener("click",()=>{const o=t.dataset.filter??"all";n.forEach(s=>{const r=s===t;s.classList.toggle("bg-accent/15",r),s.classList.toggle("text-accent",r),s.classList.toggle("border-accent/20",r),s.classList.toggle("chip",!r)}),e.forEach(s=>{const r=o==="all"||s.dataset.deviceType===o||(s.dataset.tags??"").includes(o)||s.dataset.status===o;if(c()){s.style.display=r?"":"none";return}r?(s.style.display="",s.animate([{opacity:"0",transform:"scale(0.97)"},{opacity:"1",transform:"scale(1)"}],{duration:220,easing:h,fill:"forwards"})):s.animate([{opacity:"1"},{opacity:"0"}],{duration:140,easing:"ease",fill:"forwards"}).finished.then(()=>{s.style.display="none"})})})})}function L(){const n=document.querySelectorAll("[data-tilt]");!n.length||c()||n.forEach(e=>{e.addEventListener("mousemove",s=>{const r=e.getBoundingClientRect(),i=(s.clientX-r.left)/r.width-.5,a=(s.clientY-r.top)/r.height-.5;e.style.transform=`perspective(900px) rotateY(${i*7*2}deg) rotateX(${-a*7}deg) translateZ(6px)`,e.style.transition="transform 80ms linear"}),e.addEventListener("mouseleave",()=>{e.style.transition="transform 500ms cubic-bezier(0.16,1,0.3,1), box-shadow 500ms ease",e.style.transform=""}),e.addEventListener("mouseenter",()=>{e.style.transition="transform 80ms linear"})})}function u(){m(),p(),y(),v(),E(),x(),b(),L()}document.addEventListener("DOMContentLoaded",()=>u());document.addEventListener("astro:page-load",()=>u());
