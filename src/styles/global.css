@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── CSS Custom Properties ──────────────────────────────────────────── */
:root {
  --color-surface-0:  #08080a;
  --color-surface-1:  #0f0f12;
  --color-surface-2:  #161619;
  --color-surface-3:  #1e1e23;
  --color-surface-4:  #2a2a31;
  --color-ink-1:      #f2f2f4;
  --color-ink-2:      #98989f;
  --color-ink-3:      #5a5a62;
  --color-ink-4:      #38383f;
  --color-accent:     #3b82f6;

  --color-status-online:      #22c55e;
  --color-status-offline:     #ef4444;
  --color-status-maintenance: #f59e0b;
  --color-status-retired:     #6b7280;

  --radius-card:    14px;
  --radius-panel:   20px;
  --radius-pill:    9999px;

  /* Calibrated shadows — not too heavy */
  --shadow-card:      0 1px 2px rgba(0,0,0,0.5), 0 4px 12px rgba(0,0,0,0.25);
  --shadow-card-hover:0 2px 6px rgba(0,0,0,0.55), 0 12px 32px rgba(0,0,0,0.35);
  --shadow-panel:     0 0 0 1px rgba(255,255,255,0.055);

  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-smooth:   cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring:   cubic-bezier(0.22, 1, 0.36, 1);

  --transition-fast:   150ms var(--ease-smooth);
  --transition-base:   250ms var(--ease-smooth);
  --transition-reveal: 500ms var(--ease-out-expo);
}

/* ─── View Transitions ───────────────────────────────────────────────── */
@view-transition {
  navigation: auto;
}

::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 280ms;
  animation-timing-function: var(--ease-smooth);
}
::view-transition-old(root) { animation-name: vt-out; }
::view-transition-new(root) { animation-name: vt-in;  }

@keyframes vt-out { to   { opacity: 0; transform: translateY(-6px); } }
@keyframes vt-in  { from { opacity: 0; transform: translateY(6px);  } }

/* Shared element: device media */
::view-transition-group(device-media),
::view-transition-old(device-media),
::view-transition-new(device-media) {
  animation-duration: 480ms;
  animation-timing-function: var(--ease-out-expo);
}
/* Shared element: device name */
::view-transition-group(device-name),
::view-transition-old(device-name),
::view-transition-new(device-name) {
  animation-duration: 380ms;
  animation-timing-function: var(--ease-out-expo);
}

/* ─── Reduced Motion ─────────────────────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
  *, ::before, ::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  ::view-transition-old(root),
  ::view-transition-new(root),
  ::view-transition-old(device-media),
  ::view-transition-new(device-media) {
    animation: none !important;
  }
}

/* ─── Base ─────────────────────────────────────────────────────────── */
@layer base {
  html {
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI",
                 system-ui, sans-serif;
    background-color: var(--color-surface-0);
    color: var(--color-ink-1);
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  ::selection {
    background-color: rgba(59, 130, 246, 0.2);
    color: #f2f2f4;
  }

  :focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 3px;
    border-radius: 4px;
  }

  ::-webkit-scrollbar        { width: 5px; height: 5px; }
  ::-webkit-scrollbar-track  { background: transparent; }
  ::-webkit-scrollbar-thumb  { background: var(--color-surface-4); border-radius: 999px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--color-ink-4); }
}

/* ─── Components ────────────────────────────────────────────────────── */
@layer components {

  .container-content {
    @apply mx-auto px-6 w-full;
    max-width: 1080px;
  }
  .container-wide {
    @apply mx-auto px-6 w-full;
    max-width: 1280px;
  }

  /* ─── Card ──── */
  .card {
    background: var(--color-surface-1);
    border: 1px solid rgba(255,255,255,0.065);
    border-radius: var(--radius-card);
    box-shadow: var(--shadow-card);
    transition:
      box-shadow  350ms var(--ease-out-expo),
      border-color 350ms var(--ease-smooth),
      transform   350ms var(--ease-out-expo);
  }
  .card:hover {
    box-shadow: var(--shadow-card-hover);
    border-color: rgba(255,255,255,0.10);
    transform: translateY(-4px);
  }

  /* ─── Glass ─── */
  .glass {
    background: rgba(12, 12, 15, 0.72);
    backdrop-filter: blur(24px) saturate(1.6);
    -webkit-backdrop-filter: blur(24px) saturate(1.6);
    border: 1px solid rgba(255,255,255,0.07);
  }

  /* ─── Section divider ─── */
  .section-divider {
    border-top: 1px solid rgba(255,255,255,0.055);
  }

  /* ─── Separator gradient ─── */
  .sep {
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.07), transparent);
  }

  /* ─── Reveal (scroll-triggered) ─── */
  .reveal {
    opacity: 0;
    transform: translateY(16px);
    transition:
      opacity   var(--transition-reveal),
      transform var(--transition-reveal);
  }
  .reveal.is-visible {
    opacity: 1;
    transform: none;
  }
  .reveal-fast {
    opacity: 0;
    transform: translateY(10px);
    transition:
      opacity   380ms var(--ease-out-expo),
      transform 380ms var(--ease-out-expo);
  }
  .reveal-fast.is-visible {
    opacity: 1;
    transform: none;
  }

  /* ─── Stagger grid ─── */
  .stagger-children > * {
    opacity: 0;
    transform: translateY(12px);
    transition:
      opacity   480ms var(--ease-out-expo),
      transform 480ms var(--ease-out-expo);
  }
  .stagger-children.is-visible > *:nth-child(1)   { transition-delay:   0ms; opacity:1; transform:none; }
  .stagger-children.is-visible > *:nth-child(2)   { transition-delay:  60ms; opacity:1; transform:none; }
  .stagger-children.is-visible > *:nth-child(3)   { transition-delay: 120ms; opacity:1; transform:none; }
  .stagger-children.is-visible > *:nth-child(4)   { transition-delay: 180ms; opacity:1; transform:none; }
  .stagger-children.is-visible > *:nth-child(5)   { transition-delay: 240ms; opacity:1; transform:none; }
  .stagger-children.is-visible > *:nth-child(6)   { transition-delay: 300ms; opacity:1; transform:none; }
  .stagger-children.is-visible > *:nth-child(n+7) { transition-delay: 360ms; opacity:1; transform:none; }

  /* ─── Buttons ─── */
  .btn-primary {
    @apply inline-flex items-center gap-2 px-5 py-2.5 rounded-full font-medium;
    font-size: 0.9375rem;
    background: var(--color-accent);
    color: #fff;
    transition:
      background  var(--transition-fast),
      transform   300ms var(--ease-out-expo),
      box-shadow  var(--transition-base);
    box-shadow: 0 1px 4px rgba(59,130,246,0.25);
  }
  .btn-primary:hover {
    background: #2563eb;
    transform: translateY(-1px);
    box-shadow: 0 4px 14px rgba(59,130,246,0.35);
  }
  .btn-primary:active { transform: translateY(0) scale(0.97); }

  .btn-secondary {
    @apply inline-flex items-center gap-2 px-5 py-2.5 rounded-full font-medium;
    font-size: 0.9375rem;
    background: rgba(255,255,255,0.055);
    color: var(--color-ink-1);
    border: 1px solid rgba(255,255,255,0.09);
    transition:
      background var(--transition-fast),
      transform  300ms var(--ease-out-expo),
      border-color var(--transition-fast);
  }
  .btn-secondary:hover {
    background: rgba(255,255,255,0.09);
    border-color: rgba(255,255,255,0.14);
    transform: translateY(-1px);
  }
  .btn-secondary:active { transform: translateY(0) scale(0.97); }

  /* ─── Chips ─── */
  .chip {
    @apply inline-flex items-center px-3 py-1 rounded-full;
    font-family: inherit;
    font-size: 0.8125rem;
    font-weight: 450;
    background: rgba(255,255,255,0.055);
    color: var(--color-ink-2);
    border: 1px solid rgba(255,255,255,0.07);
    transition: background var(--transition-fast), color var(--transition-fast);
    letter-spacing: 0;
  }
  .chip:hover {
    background: rgba(59,130,246,0.10);
    color: #93c5fd;
    border-color: rgba(59,130,246,0.2);
  }

  /* ─── Media placeholder surface ─── */
  .media-placeholder {
    background: linear-gradient(160deg, var(--color-surface-2) 0%, var(--color-surface-3) 100%);
    border: 1px solid rgba(255,255,255,0.055);
    position: relative;
    overflow: hidden;
  }
  .media-placeholder::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at 50% 30%, rgba(59,130,246,0.04) 0%, transparent 70%);
    pointer-events: none;
  }

  /* ─── MDX Prose ─── */
  .prose {
    color: var(--color-ink-2);
    max-width: 68ch;
  }
  .prose :is(h2,h3,h4) { color: var(--color-ink-1); }
  .prose a { color: var(--color-accent); text-decoration-thickness: 1px; }
  .prose code {
    color: #93c5fd;
    background: rgba(59,130,246,0.07);
    border-radius: 4px;
    padding: 0.15em 0.35em;
    font-size: 0.875em;
  }
  .prose pre {
    background: var(--color-surface-1);
    border: 1px solid rgba(255,255,255,0.065);
    border-radius: 12px;
  }
  .prose pre code { background: none; padding: 0; }
  .prose blockquote { border-left-color: var(--color-accent); color: var(--color-ink-2); }
  .prose hr { border-color: rgba(255,255,255,0.07); }
  .prose :is(thead th, tbody td, tbody tr) { border-color: rgba(255,255,255,0.07); }
  .prose table { width: 100%; }
}

/* ─── Keyframes ───────────────────────────────────────────────────────── */

@keyframes hero-word-in {
  from { opacity: 0; transform: translateY(28px); }
  to   { opacity: 1; transform: none; }
}
@keyframes hero-fade-up {
  from { opacity: 0; transform: translateY(16px); }
  to   { opacity: 1; transform: none; }
}
@keyframes hero-bg-shift {
  0%   { background-position: 0% 50%;  }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%;  }
}
@keyframes stat-count-in {
  from { opacity: 0; transform: translateY(10px) scale(0.95); }
  to   { opacity: 1; transform: none; }
}
@keyframes drift-slow {
  0%   { transform: translate(0, 0)      rotate(0deg);  }
  33%  { transform: translate(12px, -8px) rotate(0.5deg); }
  66%  { transform: translate(-6px, 6px)  rotate(-0.5deg); }
  100% { transform: translate(0, 0)      rotate(0deg);  }
}
@keyframes glow-card-in {
  from { box-shadow: 0 0 0 0 rgba(59,130,246,0); }
  to   { box-shadow: 0 0 40px 8px rgba(59,130,246,0.08); }
}
@keyframes section-tint-slide {
  from { transform: translateX(-10px); opacity: 0; }
  to   { transform: none; opacity: 1; }
}

/* ─── Utilities ──────────────────────────────────────────────────────── */
@layer utilities {

  /* ── Display typography — fluid from phone to desktop ── */
  .text-display {
    font-size: clamp(2.75rem, 12vw, 9.5rem);
    font-weight: 800;
    letter-spacing: -0.04em;
    line-height: 0.92;
  }
  .text-display-lg {
    font-size: clamp(2.25rem, 9vw, 7rem);
    font-weight: 700;
    letter-spacing: -0.035em;
    line-height: 0.95;
  }
  .text-display-md {
    font-size: clamp(1.75rem, 6vw, 4.5rem);
    font-weight: 700;
    letter-spacing: -0.03em;
    line-height: 1.0;
  }
  .text-display-sm {
    font-size: clamp(1.375rem, 4vw, 2.75rem);
    font-weight: 600;
    letter-spacing: -0.02em;
    line-height: 1.1;
  }

  /* Text gradients */
  .text-gradient {
    background: linear-gradient(160deg, #f2f2f4 0%, #8e8e96 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .text-gradient-blue {
    background: linear-gradient(160deg, #93c5fd 0%, #3b82f6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* ── Hero background ── */
  .hero-ambient {
    background:
      radial-gradient(ellipse 80% 50% at 20% 60%, rgba(59,130,246,0.07) 0%, transparent 55%),
      radial-gradient(ellipse 60% 40% at 80% 20%, rgba(168,85,247,0.05) 0%, transparent 55%),
      radial-gradient(ellipse 50% 40% at 60% 90%, rgba(34,197,94,0.04) 0%, transparent 55%),
      var(--color-surface-0);
  }

  /* ── Tilt card ── */
  .tilt-card {
    transform-style: preserve-3d;
    will-change: transform;
    transition: transform 400ms cubic-bezier(0.16, 1, 0.3, 1),
                box-shadow 400ms ease;
  }
  .tilt-card:hover {
    box-shadow:
      0 0 0 1px rgba(59,130,246,0.15),
      0 8px 40px rgba(0,0,0,0.5),
      0 0 60px rgba(59,130,246,0.07);
  }

  /* ── Glow card ── */
  .card-glow {
    box-shadow: 0 1px 2px rgba(0,0,0,0.5), 0 4px 12px rgba(0,0,0,0.25);
    transition: box-shadow 350ms ease, border-color 350ms ease;
  }
  .card-glow:hover {
    box-shadow:
      0 0 0 1px rgba(59,130,246,0.15),
      0 12px 40px rgba(0,0,0,0.45),
      0 0 50px rgba(59,130,246,0.07);
  }

  /* ── Animated word entrance ── */
  .word-in {
    display: inline-block;
    animation: hero-word-in 700ms cubic-bezier(0.16, 1, 0.3, 1) both;
  }

  /* ── Drift animation for ambient orbs ── */
  .drift {
    animation: drift-slow 14s ease-in-out infinite;
  }

  /* Horizontal scroll row */
  .scroll-row {
    display: flex;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    gap: 1rem;
  }
  .scroll-row::-webkit-scrollbar { display: none; }
  .scroll-row > * { flex: 0 0 auto; }

  /* Line clamp */
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }
  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
  }

  /* Sticky sidebar */
  .sticky-sidebar {
    position: sticky;
    top: 5.5rem;
  }

  /* Vignette overlay */
  .vignette {
    background: radial-gradient(ellipse at center, transparent 40%, rgba(8,8,10,0.6) 100%);
  }

  /* ── Section tints (Apple-like accent sections) ── */
  .tint-blue    { background: rgba(59,130,246,0.04);  border-color: rgba(59,130,246,0.10);  }
  .tint-green   { background: rgba(34,197,94,0.04);   border-color: rgba(34,197,94,0.10);   }
  .tint-purple  { background: rgba(168,85,247,0.04);  border-color: rgba(168,85,247,0.10);  }
  .tint-amber   { background: rgba(245,158,11,0.04);  border-color: rgba(245,158,11,0.10);  }
}
