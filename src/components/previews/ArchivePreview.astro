---
// Static mock — QNAP storage allocation visualization
const categories = [
  { name: 'Media',     size: '3.8 TB', pct: 47, color: '#4f8ef7', delay: '0.1s'  },
  { name: 'Backups',   size: '1.6 TB', pct: 20, color: '#22c55e', delay: '0.25s' },
  { name: 'Documents', size: '0.4 TB', pct:  5, color: '#f59e0b', delay: '0.4s'  },
  { name: 'Photos',    size: '0.2 TB', pct:  3, color: '#a855f7', delay: '0.55s' },
];
---

<div class="ap">
  <!-- Window chrome -->
  <div class="ap-chrome">
    <span class="ap-dot" style="background:#ff5f57"></span>
    <span class="ap-dot" style="background:#febc2e"></span>
    <span class="ap-dot" style="background:#28c840"></span>
    <span class="ap-chrome-title">Speicherübersicht</span>
    <span class="ap-total">8.0 TB</span>
  </div>

  <!-- Category bars -->
  <div class="ap-body">
    {categories.map(cat => (
      <div class="ap-row">
        <span class="ap-label">{cat.name}</span>
        <div class="ap-track">
          <div
            class="ap-fill"
            style={`--pct: ${cat.pct}%; --clr: ${cat.color}; animation-delay: ${cat.delay};`}
          ></div>
        </div>
        <span class="ap-size">{cat.size}</span>
      </div>
    ))}
  </div>

  <!-- Footer -->
  <div class="ap-footer">
    <div class="ap-free-row">
      <span class="ap-free-label">Available</span>
      <div class="ap-free-track">
        <div class="ap-free-fill"></div>
      </div>
      <span class="ap-free-val">2.0 TB free</span>
    </div>
    <div class="ap-meta">
      <span>RAID-5 · 4-drive array</span>
      <span class="ap-healthy">● Healthy</span>
    </div>
  </div>
</div>

<style>
  .ap {
    background: var(--color-surface-1);
    border-radius: 10px;
    overflow: hidden;
    font-family: 'SF Mono', 'Fira Code', ui-monospace, monospace;
    font-size: 0.72rem;
    width: 100%;
  }

  /* Chrome */
  .ap-chrome {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 9px 13px;
    background: var(--color-surface-2);
    border-bottom: 1px solid rgba(255,255,255,0.055);
  }
  .ap-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
  .ap-chrome-title { flex: 1; font-size: 0.68rem; color: var(--color-ink-3); margin-left: 4px; }
  .ap-total { font-size: 0.65rem; color: var(--color-ink-2); font-weight: 600; }

  /* Category rows */
  .ap-body { display: flex; flex-direction: column; gap: 0; padding: 10px 13px; }
  .ap-row {
    display: grid;
    grid-template-columns: 70px 1fr 52px;
    align-items: center;
    gap: 8px;
    padding: 5px 0;
  }
  .ap-label { font-size: 0.65rem; color: var(--color-ink-3); }
  .ap-track {
    height: 4px;
    background: rgba(255,255,255,0.06);
    border-radius: 3px;
    overflow: hidden;
  }
  .ap-fill {
    height: 100%;
    border-radius: 3px;
    background: var(--clr);
    animation: ap-fill 1.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    animation-delay: var(--delay, 0s);
    width: 0%;
  }
  @keyframes ap-fill {
    from { width: 0%; }
    to   { width: var(--pct); }
  }
  .ap-size { font-size: 0.62rem; color: var(--color-ink-4); text-align: right; }

  /* Footer */
  .ap-footer {
    padding: 9px 13px;
    background: rgba(255,255,255,0.016);
    border-top: 1px solid rgba(255,255,255,0.055);
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  .ap-free-row {
    display: grid;
    grid-template-columns: 60px 1fr 72px;
    align-items: center;
    gap: 8px;
  }
  .ap-free-label { font-size: 0.62rem; color: var(--color-ink-4); }
  .ap-free-track {
    height: 4px;
    background: rgba(255,255,255,0.06);
    border-radius: 3px;
    overflow: hidden;
  }
  .ap-free-fill {
    height: 100%;
    width: 25%;
    background: rgba(255,255,255,0.12);
    border-radius: 3px;
    animation: ap-fill 1.4s cubic-bezier(0.16, 1, 0.3, 1) 0.7s forwards;
    width: 0%;
  }
  .ap-free-val { font-size: 0.6rem; color: var(--color-ink-4); text-align: right; }
  .ap-meta {
    display: flex;
    justify-content: space-between;
    color: var(--color-ink-4);
    font-size: 0.6rem;
  }
  .ap-healthy { color: #22c55e; }

  @media (prefers-reduced-motion: reduce) {
    .ap-fill { animation: none; width: var(--pct); }
    .ap-free-fill { animation: none; width: 25%; }
  }
</style>
