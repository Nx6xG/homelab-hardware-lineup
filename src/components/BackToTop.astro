---
// No props — rendered once per device page via [slug].astro
---

<button
  id="btt-btn"
  aria-label="Zurück nach oben"
  class="fixed bottom-6 right-6 z-40 w-10 h-10 rounded-full flex items-center justify-center glass border border-[rgba(255,255,255,0.10)] text-[var(--color-ink-3)] hover:text-[var(--color-ink-1)] hover:border-[rgba(255,255,255,0.18)] hover:bg-[rgba(255,255,255,0.06)] active:scale-90 transition-colors duration-200"
  style="opacity:0; pointer-events:none; transition: opacity 300ms ease, color 200ms ease, border-color 200ms ease, background 200ms ease;"
>
  <svg width="15" height="15" viewBox="0 0 14 14" fill="none" aria-hidden="true">
    <path d="M7 12V2M2 7l5-5 5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</button>

<script>
  const btn = document.getElementById('btt-btn') as HTMLButtonElement | null;
  if (btn) {
    window.addEventListener('scroll', () => {
      const show = window.scrollY > 300;
      btn.style.opacity       = show ? '1' : '0';
      btn.style.pointerEvents = show ? 'auto' : 'none';
    }, { passive: true });

    btn.addEventListener('click', () => {
      const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      window.scrollTo({ top: 0, behavior: reduced ? 'instant' : 'smooth' });
    });
  }
</script>

<style>
  /* Always show on keyboard focus so it's reachable without scrolling */
  #btt-btn:focus-visible {
    opacity: 1 !important;
    pointer-events: auto !important;
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }
</style>
