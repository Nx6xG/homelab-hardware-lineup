---
import ProductCard from './ProductCard.astro';

interface Device {
  slug: string;
  name: string;
  headline: string;
  type: string;
  status: 'online' | 'offline' | 'maintenance' | 'retired';
  role: string;
  services?: string[];
  stack?: string[];
  tags?: string[];
  photo?: string;
}

interface Props {
  devices: Device[];
  columns?: 2 | 3 | 4;
  stagger?: boolean;
  class?: string;
}

const {
  devices,
  columns = 3,
  stagger = true,
  class: className = '',
} = Astro.props;

const gridCols = {
  2: 'grid-cols-1 sm:grid-cols-2',
  3: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3',
  4: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4',
};
---

<div
  class:list={[
    'grid gap-5',
    gridCols[columns],
    stagger && 'stagger-children',
    className
  ]}
>
  {devices.map((device) => (
    <ProductCard {...device} />
  ))}
</div>
